<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatAI</title>
    <link rel="icon" href="chat-ai-favicon.ico" type="image/x-icon">
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background-image: url('fiscozen-frontoffice.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
    <!-- 
      JWT Authentication Flow for Freshchat
      1. Your server generates a JWT token for the logged-in user.
      2. The token is passed to the widget config using 'jwtAuthToken'.
      3. The widget initializes and authenticates the user automatically.
      4. All user properties are set from the token, not the client-side script.
    -->

    <!-- Freshchat Configuration with JWT -->
    <script>
      // In a real application, this token would be dynamically generated on your server
      // for the logged-in user and passed to this page.
      var serverGeneratedJwtToken = "vM8w2Uo7bHzckS2Kr+YOAYbejovIZUEDxfvHGLv0vho=";

      window.fcWidgetMessengerConfig = {
        jwtAuthToken: serverGeneratedJwtToken
      };
    </script>

    <!-- Freshchat Widget Script -->
    <script src='//eu.fw-cdn.com/13069928/1021706.js' chat='true'></script>

    <!-- Script to open the widget after it loads -->
    <script>
      window.fwcrm.on('widget:loaded', function() {
        console.log("Freshchat widget loaded. User was authenticated via JWT.");
        
        // No need to set properties here; they are all read from the JWT token.
        // We just need to open the widget.
        window.fcWidget.open();
        console.log("Widget opened automatically.");
      });
    </script>
</body>
</html>
