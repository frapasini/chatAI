<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatAI</title>
    <link rel="icon" href="chat-ai-favicon.ico" type="image/x-icon">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* Prevent scrolling on the main page */
        }
        body {
            display: flex;
        }
        #main-content {
            width: 100vw;
            height: 100vh;
            background-image: url('newFO.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        #chat-container {
            width: 25vw;
            height: 100vh;
            position: relative;
            z-index: 9999;
        }
    </style>
</head>
<body>
  <div id="main-content"></div>
  <div id="chat-container"></div>

  <script>
    function initFreshChat() {
      console.log("initFreshChat function called!");
      window.fcWidget.init({
        token: "4b139dcc-a799-4e3f-984c-e227cf123bae",
        host: "https://fiscozen.freshchat.com",
        widgetUuid: "ca164ad6-2471-40c2-af9c-7e7f32825147",
        externalId: "test-68-external-id",
        restoreId: "e2a144bb-0c69-4b45-9439-78bdaaaa88c1",
        config: {
          headerProperty: { hideHeader: true },
        },
      });

      function moveChatWhenReady() {
        var chatContainer = document.getElementById('chat-container');
        var freshchatFrame = document.getElementById('fc_frame');
        
        if (chatContainer && freshchatFrame) {
            console.log("Found fc_frame, moving it to container.");
            // Apply styles to make it fit the container
            freshchatFrame.style.width = '100%';
            freshchatFrame.style.height = '100%';
            freshchatFrame.style.position = 'relative';

            // Move the iframe into our container
            chatContainer.appendChild(freshchatFrame);
        } else {
            // If the frame doesn't exist yet, wait and try again.
            console.log("fc_frame not found, will try again in 100ms.");
            setTimeout(moveChatWhenReady, 100);
        }
      }

      // Wait for the widget to be ready, then start trying to move it.
      window.fcWidget.on('widget:loaded', moveChatWhenReady);

      window.fcWidget.open();
    }
    function initialize(i,t){var e;i.getElementById(t)?
    initFreshChat():((e=i.createElement("script")).id=t,e.async=!0,
    e.src="https://fiscozen.freshchat.com/js/widget.js",e.onload=initFreshChat,i.head.appendChild(e))}
    function initiateCall(){initialize(document,"Freshchat-js-sdk")}
    window.addEventListener?window.addEventListener("load",initiateCall,!1):
    window.attachEvent("load",initiateCall,!1);
  </script>
</body>
</html>
